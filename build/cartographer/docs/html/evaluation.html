<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Evaluation &#8212; Cartographer  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css?v=514cf933" />
    
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Terminology" href="terminology.html" />
    <link rel="prev" title="Configuration" href="configuration.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="terminology.html" title="Terminology"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="configuration.html" title="Configuration"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Cartographer  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Evaluation</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="evaluation">
<h1>Evaluation<a class="headerlink" href="#evaluation" title="Link to this heading">¶</a></h1>
<p>Performing evaluation is a crucial part of developing a SLAM system.
For this purpose, Cartographer offers built-in tools that can aid the tuning process or can be used for quality assurance purposes.</p>
<p>These tools can be used to assess the SLAM result even when no dedicated ground truth is available.
This is in contrast to public SLAM benchmarks like e.g the KITTI dataset <a class="footnote-reference brackets" href="#id4" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> or the TUM RGB-D dataset <a class="footnote-reference brackets" href="#id5" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>, where highly-precise ground truth states (GPS-RTK, motion capture) are available as a reference.</p>
<section id="concept">
<h2>Concept<a class="headerlink" href="#concept" title="Link to this heading">¶</a></h2>
<p>The process comprises two steps:</p>
<ol class="arabic simple">
<li><p>auto-generation of “ground truth” relations</p></li>
<li><p>evaluation of the test data against the generated ground truth</p></li>
</ol>
<p>The evaluation is based on the pose relations metric proposed in <a class="footnote-reference brackets" href="#id6" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>.
Rather than comparing the pose of a trajectory node directly to the corresponding ground truth pose, it compares the relative poses between two trajectory nodes in the probe data to the corresponding relation of two trajectory nodes in the ground truth trajectory.</p>
<p>In Cartographer, we can generate such ground truth relations from trajectories with loop closures.
Let an optimized trajectory with loop closures be the input for the ground truth generation.
We select the relations from loop closure constraints that satisfy the following criteria:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">min_covered_distance</span></code>: Minimum covered distance in meters before a loop closure is considered a candidate for autogenerated ground truth.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outlier_threshold_meters</span></code>: Distance in meters beyond which constraints are considered outliers.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outlier_threshold_radians</span></code>: Distance in radians beyond which constraints are considered outliers.</p></li>
</ul>
<p>We can assume the pose relations of neighboring trajectory nodes fulfilling these requirements to be locally correct in a fully optimized trajectory.
Although this is not a ground truth in the sense of an independent input from another source, we can now use it to evaluate the quality of local SLAM results that were generated without loop closure optimization.</p>
<p>The following figure illustrates the concept.
On the left side, the ground truth relations are visualized as green connections between trajectory nodes of a fully optimized trajectory.
On the right side, the corresponding relations in a non-optimized trajectory are shown in red.</p>
<p>The actual metric that is computed is the difference between the ground truth (green) and the probe (red) relations.</p>
<img alt="_images/autogenerate_groundtruth.png" src="_images/autogenerate_groundtruth.png" />
</section>
<section id="advantages-limitations">
<h2>Advantages &amp; Limitations<a class="headerlink" href="#advantages-limitations" title="Link to this heading">¶</a></h2>
<p>The first obvious advantage is the easier data collection process compared to a cumbersome ground truth setup.
Another great advantage of this methodology is that the SLAM system can be evaluated in any custom sensor configuration (compared to public benchmarks where we are restricted to the data and the sensor configuration of the authors).</p>
<p>However, this type of self-evaluation is not suitable for measuring the accuracy of the full SLAM system with all optimizations enabled - only an evaluation with <em>real</em> ground truth states can provide that.
Furthermore, trajectory nodes outside of loop closure areas can’t be considered.</p>
</section>
<section id="how-to">
<h2>How-To<a class="headerlink" href="#how-to" title="Link to this heading">¶</a></h2>
<p>Given a serialized state of a fully optimized trajectory (here: <code class="docutils literal notranslate"><span class="pre">optimized.pbstream</span></code> file), the ground truth relations can be generated with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>&lt;build&gt;<span class="w">  </span><span class="c1"># (directory where Cartographer&#39;s binaries are located)</span>
./cartographer_autogenerate_ground_truth<span class="w"> </span>-pose_graph_filename<span class="w"> </span>optimized.pbstream<span class="w"> </span>-output_filename<span class="w"> </span>relations.pbstream<span class="w"> </span>-min_covered_distance<span class="w"> </span><span class="m">100</span><span class="w"> </span>-outlier_threshold_meters<span class="w"> </span><span class="m">0</span>.15<span class="w"> </span>-outlier_threshold_radians<span class="w"> </span><span class="m">0</span>.02
</pre></div>
</div>
<p>Then, a non-optimized trajectory <code class="docutils literal notranslate"><span class="pre">test.pbstream</span></code> can be evaluated against the generated relations with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./cartographer_compute_relations_metrics<span class="w"> </span>-relations_filename<span class="w"> </span>relations.pbstream<span class="w"> </span>-pose_graph_filename<span class="w"> </span>test.pbstream
</pre></div>
</div>
<p>This will produce output in this form:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Abs translational error 0.01944 +/- 0.01819 m
Sqr translational error 0.00071 +/- 0.00189 m^2
Abs rotational error 0.11197 +/- 0.12432 deg
Sqr rotational error 0.02799 +/- 0.07604 deg^2
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading">¶</a></h2>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id4" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Andreas Geiger, Philip Lenz and Raquel Urtasun.
<em>Are we ready for Autonomous Driving? The KITTI Vision Benchmark Suite</em>.
CVPR, 2012.</p>
</aside>
<aside class="footnote brackets" id="id5" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>Jürgen Sturm, Nikolas Engelhard, Felix Endres, Wolfram Burgard and Daniel Cremers.
<em>A Benchmark for the Evaluation of RGB-D SLAM Systems</em>.
IROS, 2012.</p>
</aside>
<aside class="footnote brackets" id="id6" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">3</a><span class="fn-bracket">]</span></span>
<p>Rainer Kümmerle, Bastian Steder, Christian Dornhege, Michael Ruhnke, Giorgio Grisetti, Cyrill Stachniss and Alexander Kleiner.
<em>On measuring the accuracy of SLAM algorithms.</em>
Autonomous Robots 27(4), pp.387-407, 2009.</p>
</aside>
</aside>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Evaluation</a><ul>
<li><a class="reference internal" href="#concept">Concept</a></li>
<li><a class="reference internal" href="#advantages-limitations">Advantages &amp; Limitations</a></li>
<li><a class="reference internal" href="#how-to">How-To</a></li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="configuration.html"
                          title="previous chapter">Configuration</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="terminology.html"
                          title="next chapter">Terminology</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/evaluation.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="terminology.html" title="Terminology"
             >next</a> |</li>
        <li class="right" >
          <a href="configuration.html" title="Configuration"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Cartographer  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Evaluation</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2025 The Cartographer Authors.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>